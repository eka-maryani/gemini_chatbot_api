<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gemini Bloom AI</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Quicksand:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

  <!-- Markdown & Highlight -->
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-light.min.css">
  <script src="https://cdn.jsdelivr.net/npm/marked@4.3.0/marked.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div id="toast-container"></div>

  <!-- Confirm Modal -->
  <div class="confirm-overlay" id="custom-confirm" style="display: none;">
    <div class="confirm-box">
      <span class="material-symbols-rounded confirm-icon">help</span>
      <h3 class="confirm-title" id="confirm-title">Are you sure?</h3>
      <p class="confirm-desc" id="confirm-desc">Action cannot be undone.</p>
      <div class="confirm-actions">
        <button class="confirm-btn btn-no" id="confirm-cancel">Cancel</button>
        <button class="confirm-btn btn-yes" id="confirm-ok">Confirm</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="settings-modal" style="display: none;" onclick="closeOnOutside(event)">
    <div class="modal-box">
      <h3 style="font-family:'Playfair Display'; font-size:1.5rem; margin-bottom:0.5rem">API Settings</h3>
      <p style="color:#999; font-size:0.9rem">Enter your Gemini API Key to activate Bloom.</p>
      <div class="input-group">
        <input type="password" class="modal-input" id="api-key-input" placeholder="API Key...">
        <span class="material-symbols-rounded toggle-password" onclick="toggleApiKeyVisibility()">visibility</span>
      </div>
      <div style="display:flex; gap:0.5rem; align-items:center; margin-top:1rem;">
        <button onclick="deleteApiKey()"
          style="border:none; background:none; cursor:pointer; color:var(--accent-danger); font-size:0.9rem; padding:0.5rem;">Delete</button>
        <div style="flex:1"></div>
        <button onclick="closeSettings()"
          style="border:none; background:none; cursor:pointer; color:#666; font-size:0.9rem; padding:0.5rem;">Cancel</button>
        <button class="btn-save-modal" onclick="saveApiKey()"
          style="width:auto; padding:0.6rem 1.5rem; margin:0;">Save</button>
      </div>
    </div>
  </div>

  <div style="position:absolute; top:1rem; left:1rem; cursor:pointer;" id="mobile-menu" class="attach-btn"
    onclick="toggleSidebar()">
    <span class="material-symbols-rounded" style="color:var(--text-muted)">menu</span>
  </div>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="header-top">
        <div class="logo-area"><span class="material-symbols-rounded" style="color: var(--accent-pink);">spa</span>
          Gemini Bloom</div>
        <button class="btn-close-sidebar" onclick="toggleSidebar()"><span
            class="material-symbols-rounded">close</span></button>
      </div>
      <button class="btn-new-chat" onclick="startNewChat()"><span class="material-symbols-rounded"
          style="font-size:20px">add</span> New Chat</button>
    </div>

    <!-- HISTORY LIST CONTAINER -->
    <div class="history-list" id="history-list"></div>

    <div class="user-profile" onclick="openSettings()">
      <div style="display:flex; gap:0.8rem; align-items:center;">
        <div class="avatar-mini">U</div><span style="font-weight:600; font-size:0.9rem;">Settings</span>
      </div>
      <span class="material-symbols-rounded" style="color:#ccc">settings</span>
    </div>
  </aside>

  <main class="main-content">
    <div class="chat-area" id="chat-box">
      <div class="welcome-screen" id="welcome-screen">
        <h1 class="welcome-title">Hello, <span>Beautiful Soul</span></h1>
        <p class="welcome-subtitle">Let's weave your thoughts into reality.</p>
        <div class="suggestion-grid">
          <div class="suggestion-card" onclick="setInput('Tulis puisi senja')"><span class="material-symbols-rounded"
              style="color:var(--accent-pink)">edit_note</span><b>Creative Writing</b></div>
          <div class="suggestion-card" onclick="setInput('Ide konten aesthetic')"><span class="material-symbols-rounded"
              style="color:var(--accent-pink)">palette</span><b>Visual Ideas</b></div>
        </div>
      </div>
    </div>
    <div class="input-zone">
      <form class="input-wrapper" id="chat-form">
        <div id="file-preview" class="file-preview"></div>
        <div class="input-main">
          <input type="file" id="file-input" multiple hidden accept="image/*,.pdf,.txt">
          <div onclick="document.getElementById('file-input').click()" style="cursor:pointer; color:#999; padding:8px">
            <span class="material-symbols-rounded">attach_file</span>
          </div>
          <input type="text" id="user-input" placeholder="Type gently..." autocomplete="off">
          <div class="input-actions-right">
            <input type="hidden" id="model-select" value="gemini-2.5-flash">
            <div class="custom-dropdown" id="custom-model-dropdown" onclick="toggleDropdown(event)">
              <div class="dropdown-selected" id="dropdown-selected-text">Flash 2.5</div>
              <div class="dropdown-options" id="dropdown-options">
                <div class="dropdown-option selected" onclick="selectModel('gemini-2.5-flash', 'Flash 2.5', this)">
                  <span>Flash 2.5</span>
                  <span class="material-symbols-rounded option-check">check</span>
                </div>
                <div class="dropdown-option" onclick="selectModel('gemini-2.5-flash-lite', 'Flash 2.5 Lite', this)">
                  <span>Flash 2.5 Lite</span>
                  <span class="material-symbols-rounded option-check">check</span>
                </div>
                <div class="dropdown-option" onclick="selectModel('gemini-2.5-pro', 'Pro 2.5', this)">
                  <span>Pro 2.5</span>
                  <span class="material-symbols-rounded option-check">check</span>
                </div>
                <div class="dropdown-option" onclick="selectModel('gemini-3-pro', 'Pro 3.0', this)">
                  <span>Pro 3.0</span>
                  <span class="material-symbols-rounded option-check">check</span>
                </div>
                <div class="dropdown-option" onclick="selectModel('gemini-2.0-flash-exp', 'Flash 2.0 Exp', this)">
                  <span>Flash 2.0 Exp</span>
                  <span class="material-symbols-rounded option-check">check</span>
                </div>
              </div>
            </div>
            <div class="icon-btn" onclick="startVoiceInput()" title="Voice Input" id="mic-btn">
              <span class="material-symbols-rounded">mic</span>
            </div>
            <button type="submit" class="send-btn"><span class="material-symbols-rounded">arrow_upward</span></button>
          </div>
        </div>
      </form>
    </div>
  </main>

  <script src="script.js"></script>
</body>

</html>